{% from "govuk/components/tag/macro.njk" import govukTag %}

{% set formStatus %}
  {{ govukTag({ text: "Draft", classes: "govuk-tag--orange" }) }}
{% endset %}

{% set formUpdated %}
  {{ (form.draft.updatedAt if form.draft.updatedAt else "2024-04-09") | formatDate }}
  by {{ form.draft.updatedBy.displayName | default("Enrique Chase", true) }}
{% endset %}

{% set formCreated %}
  {{ (form.draft.createdAt if form.draft.createdAt else "2024-03-01") | formatDate }}
  by {{ form.draft.createdBy.displayName | default("Nathanael Booker", true) }}
{% endset %}

{% set formPreviewLink %}
  {% set linkHref = previewUrl + "/preview/draft/" + form.slug | urlencode %}
  <a href="{{ linkHref }}" class="govuk-link govuk-link--no-visited-state" target="_blank" rel="noreferrer">
    {{ linkHref }} (opens in a new tab)
  </a>
{% endset %}

{{ govukSummaryList({
  rows: [
    {
      key: {
        text: "Status"
      },
      value: {
        html: formStatus
      }
    },
    {
      key: {
        text: "Updated"
      },
      value: {
        text: formUpdated
      }
    },
    {
      key: {
        text: "Created"
      },
      value: {
        text: formCreated
      }
    },
    {
      key: {
        text: "Preview link"
      },
      value: {
        text: formPreviewLink | safe
      }
    }
  ]
}) }}
